# Makefile for GEDI simulator tools
PKG_CFLAGS+=@HDF5_CFLAGS@
PKG_LIBS+=@HDF5_LIBS@
PKG_CFLAGS+=@GSL_CFLAGS@
PKG_LIBS+=@GSL_LIBS@
PKG_CFLAGS+=@GDAL_CFLAGS@
PKG_LIBS+=@GDAL_LIBS@

HANCOCKTOOLS_ROOT = tools
GEDIRAT_ROOT = gedisimulator
LIBCLIDAR_ROOT = libclidar
CMPFIT_ROOT = cmpfit-1.2


PKG_CFLAGS += -I$(GEDIRAT_ROOT) -I$(HANCOCKTOOLS_ROOT) -I$(CMPFIT_ROOT) \
-I${LIBCLIDAR_ROOT} -I. -I/usr/include/geotiff \
-I./cmpfit-1.2 -I/usr/include/libgeotiff

PKG_CXXFLAGS = $(PKG_CFLAGS)

src = $(LIBCLIDAR_ROOT)/libLasProcess.c $(LIBCLIDAR_ROOT)/libLasRead.c \
	$(LIBCLIDAR_ROOT)/tiffWrite.c $(LIBCLIDAR_ROOT)/gaussFit.c \
	$(LIBCLIDAR_ROOT)/libLidVoxel.c  $(LIBCLIDAR_ROOT)/libTLSread.c \
	$(LIBCLIDAR_ROOT)/libLidarHDF.c $(GEDIRAT_ROOT)/gediIO.c \
	$(LIBCLIDAR_ROOT)/libOctree.c $(GEDIRAT_ROOT)/gediNoise.c \
	$(GEDIRAT_ROOT)/gediMetric.o
src += $(CMPFIT_ROOT)/mpfit.c
OBJECTS = $(src:.c=.o)

src_cpp = $(wildcard *.cpp)
OBJECTS += $(src_cpp:.cpp=.o)


all: deps


deps:
	Rscript ../tools/deps.R


.PHONY: deps
